<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://i.ibb.co/1bgTMY6/logosercin.png">
    <title>BSearchin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        * {
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
        }
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            background-color: #000000;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
        }
        #logo {
            font-size: 40px;
        }
        #logo img {
            width: 100px;
            height: auto;
        }
        #browser-container {
            width: 43%;
            text-align: center;
            display: flex;
            padding: 20px;
        }
        #url-bar {
            width: 100%;
            padding: 10px 40px;
            font-size: 18px;
            color: #ffffff;
            background-color: #00000017;
            border: solid 1.5px rgb(255 255 255 / 59%);
            border-radius: 139px;
            outline: none;
            position: relative;
        }
        ::-webkit-scrollbar {
            height: 5px;
            background-color: #3a3b3e00;
        }
        #url-bar:focus {
            background: #00000040;
            backdrop-filter: blur(40px);
            border: solid 1.5px rgb(255 255 255 / 22%);
        }
        #url-bar::placeholder {
            color: #ffffff;
        }
        #go-button {
            padding: 11px 15px;
            position: relative;
            top: 30px;
            background: #00000000;
            border: solid 2px #ffffff;
            outline: none;
            border-radius: 33px;
            color: white;
            text-align: center;
        }
        #go-button:hover {
            background-color: #ffffff;
            color: black;
        }
        .search-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            width: 100%;
        }
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 25px;
            gap: 10px;
        }
        .option {
            display: flex;
            align-items: center;
            padding: 5px 10px;
            color: #ffffff;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.3s;
            justify-content: space-between;
            position: fixed;
            top: 16px;
            right: 26px;
        }
        .option:hover {
            background: linear-gradient(135deg, #666, #333);
            padding: 5px 10px;
        }
        .url-input {
            display: none;
            background-color: #8d8d8d30;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            padding: 5px;
            font-size: 14px;
            width: 100%;
            margin-top: 5px;
            outline: none;
        }
        #background-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: url('https://www.transparenttextures.com/patterns/debut-light.png');
            opacity: 10%;
        }
        #saved-websites {
            width: 115%;
            position: fixed;
            top: 0px;
            padding: 10px;
            left: -140px;
            background: #00000024;
            backdrop-filter: blur(8px);
            border-bottom: solid 1px #ffffff40;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        div#websites-list {
            display: flex;
            position: relative;
            gap: 15px;
            overflow-x: scroll;
            width: 75%;
            white-space: nowrap;
            text-transform: capitalize;
            padding: 0px 25px;
            max-width: 10000em;
            left: 6px;
        }
        .option.settings-option {
    position: fixed;
    top: 80px;
    right: 25px;
    background: #0000001a;
    padding: 5px 15px;
    border-radius: 50%;
    color: white;
    backdrop-filter: blur(5px);
    border: solid 1.5px #ffffff2e;
}
        .website-item {
            display: flex;
            padding: 6px 13px;
            margin: 5px;
            font-size: 12px;
            justify-content: flex-start;
            transition: transform 0.2s;
            cursor: grab;
            border-right: solid 2.5px #ffffff4a;
        }
        .website-item:focus {
            cursor: grabbing;
        }
        .website-item.dragging {
            opacity: 0.5;
            transform: scale(1.05);
            background-color: #ffffff2b;
        }
        .suggestion-item.active {
            cursor: pointer;
            background-color: #d1d1d1;
            color: rgb(0, 0, 0);
        }
        .website-item:hover {
            background-color: #e9e9e940;
            border-radius: 6px;
        }
        .website-item img {
            width: 15px;
            height: 15px;
            margin-right: 5px;
        }
        .color-picker {
            position: fixed;
            top: 15px;
            right: 0px;
        }
        input#colorPicker {
            padding: 14px 13px;
            width: 5%;
            background: #ffffff24;
            border: solid 1px #ffffff24;
            outline: none;
        }
        .delete-btn {
            background: transparent;
            border: none;
            color: #000000;
            cursor: pointer;
            font-weight: 500;
            font-size: 12px;
            position: absolute;
            background: rgb(255 255 255);
            padding: 0px 5px;
            border-radius: 3px;
            bottom: 0px;
            margin-left: -20px;
        }
        .visitsave {
            font-size: 23px;
            padding: 0px 10px;
            border-radius: 8px;
            margin-left: -15px;
        }
        .visitsave:hover {
            background: #ffffff30;
        }
        .delete-btn:hover {
            font-size: 22px;
            padding: 4px 11px;
            color: black;
            background: rgb(255, 255, 255);
            font-weight: 300;
        }
        a {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.801);
        }
        .frombs {
            position: fixed;
            gap: 20px;
            display: flex;
            font-size: 13px;
            width: 100%;
            height: 50px;
            align-items: center;
            left: 0px;
            padding: 8px 30px;
            bottom: 0px;
            background: #00000024;
            backdrop-filter: blur(8px);
            border-top: solid 1px #ffffff40;
        }
        .website-item a {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .frombs a:hover {
            text-decoration: underline 1.5px;
            text-underline-position: under;
            transition: 1s;
        }
        .footer {
            color: #e8eaed;
            position: fixed;
            font-size: 15px;
            right: 90px;
        }
        .more {
            display: none;
        }
        #clear-input {
            position: absolute;
            cursor: pointer;
            color: #ffffff;
            font-size: 30px;
            display: none;
            top: 2.5px;
            font-weight: 100;
            right: -10px;
        }
        #clear-input:hover {
            color: rgba(255, 255, 255, 0.795);
        }
        .suggestions {
            background: #00000040;
            backdrop-filter: blur(40px);
            z-index: 1000;
            border-radius: 10px;
            color: #ffffff;
            font-weight: 500;
            overflow-y: scroll;
            overflow-x: hidden;
            border: solid 1.5px #ffffff2b;
            display: none;
            position: absolute;
            width: 38%;
            text-align: left;
            max-height: 280px;
            top: 53%;
            margin-top: 15px;
        }
        .suggestions::-webkit-scrollbar {
            height: 115px;
            width: 10px;
        }
        .optionss {
            display: flex;
            gap: 15px;
        }
        span#clear-input {
            position: relative;
            top: 45px;
            background: #00000000;
            outline: none;
            color: white;
            text-align: center;
            font-size: 15px;
        }
        .suggestions::-webkit-scrollbar-track {
            background: transparent;
            margin-top: 15px;
            margin-bottom: 15px;
        }
        .suggestions::-webkit-scrollbar-thumb {
            background: #ffffff30;
            border-radius: 0px;
        }
        .suggestions::-webkit-scrollbar-thumb:hover {
            background: #ffffffc8;
        }
        .suggestion-item {
            padding: 10px 30px;
            cursor: pointer;
            text-align: left;
        }
        span {
            overflow: hidden;
            font-size: 15px;
        }
        .suggestion-item:hover {
            background: #cacaca2e;
        }
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            z-index: -1;
            filter: brightness(0.5);
        }
        .blur-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            filter: blur(5px);
            opacity: 0.3;
            filter: brightness(0.5);
            z-index: -100000;
        }
        .custom-menu {
            position: absolute;
            background-color: #282828;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            border-radius: 15px;
            padding: 9px;
        }
        .menu-item {
            padding: 6px 20px;
            cursor: pointer;
            font-size: 14px;
        }
        .menu-item:hover {
            background-color: #f0f0f02e;
    border-radius: 8px;
        }
        .settings-menu {
                 position: absolute;
    background-color: #00000003;
    box-shadow: none;
    z-index: 1000;
    border-radius: 20px;
    padding: 13px;
    top: 125px;
    right: 25px;
    backdrop-filter: blur(15px);
    border: solid 1.5px #ffffff36;
        }
        .recommended-bg-popup {
                position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #00000052;
    border-radius: 30px;
    padding: 20px;
    z-index: 3000;
    width: 84%;
    color: #ffffff;
    box-shadow: 10px 10px 10px 1000px #0000005c;
    backdrop-filter: blur(15px);
    border: solid 1.5px #ffffff3b;
    display: none;
    max-width: 600px;
        }
        
        .recommended-bg-item {
            cursor: pointer;
    width: -webkit-fill-available;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
        }
        .recommended-bg-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .recommended-bg-close {
                cursor: pointer;
    color: #cbcbcb;
    font-size: 25px;
    font-weight: 100;
    position: fixed;
    top: 8px;
    right: 20px;
        }
        .recommended-bg-close:hover {
            color: #ffffff;
        }
        .recommended-bg-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
       .recommended-bg-item {
    cursor: pointer;
    width: 100%;
    height: 110px;
    object-fit: cover;
    border-radius: 8px;
    border: solid 3px #ffffff00;
}
        .recommended-bg-item:hover {
                border: solid 3px #ffffff;

        }
        .recommended-bg-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }
        .recommended-bg-download {
            cursor: pointer;
            color: #ffffff;
            font-size: 14px;
            padding: 8px 15px;
            background: #ffffff24;
            border-radius: 8px;
        }
        .recommended-bg-download:hover {
            background: #ffffff40;
        }
        .popup-container {
              position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #00000052;
    border-radius: 15px;
    padding: 20px;
    z-index: 3000;
    display: none;
    max-width: 400px;
    width: 83%;
    color: #ffffff;
    box-shadow: 10px 10px 10px 1000px #0000005c;
    backdrop-filter: blur(15px);
    border: solid 1.5px #ffffff3b;
        }
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .popup-close {
                cursor: pointer;
    color: #ffffff8c;
    font-size: 25px;
    font-weight: 100;
    position: absolute;
    top: 5px;
    right: 15px;

        }
        .popup-close:hover {
            color: #ffffff;
        }
        .popup-input {
                width: -webkit-fill-available;
    padding: 10px;
    margin-bottom: 15px;
    background-color: #ffffffd4;
    border: none;
    border-radius: 8px;
    color: black;
    font-size: 14px;
    text-align: center;
    outline: none;

        }
        ::placeholder{
            color: black;
        }
        .popup-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .popup-button {
            padding: 8px 15px;
            background: #ffffff24;
            border-radius: 8px;
            cursor: pointer;
            color: #ffffff;
            border: none;
        }
        .popup-button:hover {
            background: #ffffff40;
        }
        .popup-message {
            margin-bottom: 15px;
            font-size: 14px;
        }
        @media(max-width:480px) {
            body {
                position: fixed;
                width: 100%;
            }
            #saved-websites {
                width: 103%;
                position: fixed;
                top: 0px;
                padding: 10px;
                left: -30px;
                background: #00000024;
                backdrop-filter: blur(8px);
                border-bottom: solid 1px #ffffff40;
                height: 45px;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            input#colorPicker {
                position: fixed;
                right: 80px;
                padding: 12px 11px;
                border-radius: 8px;
            }
            input#url-bar {
                position: absolute;
                width: 85%;
                left: -10px;
                padding: 10px 35px;
                font-size: 15px;
            }
            .suggestion-item {
                padding: 8px 25px;
                cursor: pointer;
                font-size: 15px;
            }
            .suggestions {
                position: absolute;
                width: 95%;
                left: -7px;
                text-align: left;
                max-height: 280px;
                padding: 15px;
                top: 191%;
                margin-top: 10px;
            }
            #clear-input {
                position: absolute;
                right: -5px;
                cursor: pointer;
                color: #ffffff;
                font-size: 28px;
                display: none;
                top: 3px;
                font-weight: 100;
            }
             .recommended-bg-item {
            cursor: pointer;
            width: 100%;
            height: 85px;
            object-fit: cover;
            border-radius: 8px;
                border: solid 3px #ffffff00;

        }
            .option {
                position: fixed;
                top: 15px;
                right: 8px;
            }
            .option.settings-option {
    position: fixed;
    top: 80px;
    right: 5px;
}
            .frombs {
                display: none;
            }
            .settings-menu{
                position: fixed;
                    top: 125px;
    right: 5px;
            }
            #go-button {
                position: relative;
                top: 65px;
                padding: 5px 25px;
            }
            #logo {
                font-size: 25px;
                position: fixed;
                top: 80px;
                left: 18px;
            }
            #browser-container {
                width: 80%;
                position: fixed;
                top: 150px;
            }
            div#websites-list {
                display: flex;
                position: relative;
                gap: 10px;
                overflow-x: scroll;
                width: 73%;
                white-space: nowrap;
                padding: 0px;
            }
            .website-item {
                left: 5px;
                position: relative;
            }
            .more {
                display: block;
                background: #ffffff24;
                width: 100%;
                text-align: center;
                padding: 20px;
                bottom: 0px;
                position: fixed;
                font-size: 12px;
                gap: 10px;
                display: grid;
            }
            span#clear-input {
                position: relative;
                top: 70px;
                background: #00000000;
                outline: none;
                color: white;
                text-align: center;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
<!-- Saved Websites Section -->
<div id="saved-websites">
    <div class="visitsave">
        <a href="savedsite.html"><i class="fa-solid fa-grip"></i></a>
    </div>
    <div id="websites-list"></div>
</div>

<!-- Logo Section -->
<div id="logo">BSearchin</div>
<script src="noright.js"></script>
<!-- Search Container -->
<div id="browser-container">
    <div class="search-wrapper">
       <input type="text" id="url-bar" placeholder="Enter your query here..." autocomplete="off">
       <div class="suggestions" id="suggestions-list"></div>
        <div class="optionss">
            <button id="go-button" disabled><i class="fa-solid fa-magnifying-glass"></i></button>
            <span id="clear-input">Clear</span>
        </div>
    </div>
</div>

<div class="custom-menu" style="display: none;">
    <div class="menu-item" data-action="copy">Copy</div>
    <div class="menu-item" data-action="paste">Paste</div>
    <div class="menu-item" data-action="new-tab">New Tab</div>
</div>

<!-- Options Container -->
<div class="options-container">
    <div class="option">
        <span class="option-text"><i class="fa-solid fa-plus"></i></span>
    </div>
    <div class="option settings-option">
        <span class="option-text"><i class="fa-solid fa-ellipsis-vertical"></i></span>
    </div>
</div>

<div class="settings-menu" style="display: none;">
    <div class="menu-item" data-action="change-bg">Upload an image</div>
    <div class="menu-item" data-action="delete-bg">Delete Wallpaper</div>
    <div class="menu-item" data-action="color-picker">Set Color Palette</div>
    <div class="menu-item" data-action="import-bg-link">Import by link</div>
    <hr style="background-color: #ffffff36;outline: none;border: none;height: 1.5px;margin: 5px 0px;">
    <div class="menu-item" data-action="recommended-bg">Recommends</div>
</div>
<div class="recommended-bg-actions" style="display: none;">
        <span class="recommended-bg-download" id="downloadBgBtn"></span>
    </div>
<div class="recommended-bg-popup" id="recommendedBgPopup">
    <div class="recommended-bg-header">
        <span style="font-size: 16px; font-weight: 600;">Choose a Background</span>
        <span class="recommended-bg-close" onclick="document.getElementById('recommendedBgPopup').style.display='none'">×</span>
    </div>
    <div class="recommended-bg-grid" id="recommendedBgGrid">
        <img class="recommended-bg-item" src="https://images.unsplash.com/photo-1751182782142-000e62239d85?q=80&w=2232&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="BG 1">
        <img class="recommended-bg-item" src="https://images.unsplash.com/photo-1753454116483-417bbc0a975c?q=80&w=2232&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="BG 2">
        <img class="recommended-bg-item" src="https://images.unsplash.com/photo-1599677470813-2ee1887a96a2?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="BG 4">
        <img class="recommended-bg-item" src="https://images.unsplash.com/photo-1640975131494-c432fdff936c?q=80&w=1784&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="BG 5">
        <img class="recommended-bg-item" src="https://images.unsplash.com/photo-1687885420853-77b6dc847690?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="BG 5">
        <img class="recommended-bg-item" src="https://images.unsplash.com/photo-1753695115211-12629cb8d4e9?q=80&w=2200&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="BG 5">
    </div>
</div>

<!-- Popup for Adding Website -->
<div class="popup-container" id="addWebsitePopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Add Website</span>
        <span class="popup-close" onclick="document.getElementById('addWebsitePopup').style.display='none'">×</span>
    </div>
    <input type="text" id="websiteUrlInput" class="popup-input" placeholder="Enter website URL">
    <input type="text" id="websiteTitleInput" class="popup-input" placeholder="Enter website title">
    <div class="popup-buttons">
        <button class="popup-button" onclick="submitWebsite()">Add Now</button>
    </div>
</div>

<!-- Popup for Website Title Error -->
<div class="popup-container" id="titleErrorPopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Error</span>
        <span class="popup-close" onclick="document.getElementById('titleErrorPopup').style.display='none'">×</span>
    </div>
    <div class="popup-message">Website title cannot be empty!</div>
    <div class="popup-buttons">
        <button class="popup-button" onclick="document.getElementById('titleErrorPopup').style.display='none'; document.getElementById('addWebsitePopup').style.display='block'">OK</button>
    </div>
</div>

<!-- Popup for Delete Website Confirmation -->
<div class="popup-container" id="deleteWebsitePopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Confirm Delete</span>
        <span class="popup-close" onclick="document.getElementById('deleteWebsitePopup').style.display='none'">×</span>
    </div>
    <div class="popup-message" id="deleteWebsiteMessage"></div>
    <div class="popup-buttons">
        <button class="popup-button" id="confirmDeleteBtn">Delete Now</button>
    </div>
</div>

<!-- Popup for Image Too Large Error -->
<div class="popup-container" id="imageTooLargePopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Error</span>
        <span class="popup-close" onclick="document.getElementById('imageTooLargePopup').style.display='none'">×</span>
    </div>
    <div class="popup-message">Image too large to store. Try a smaller file.</div>
    <div class="popup-buttons">
        <button class="popup-button" onclick="document.getElementById('imageTooLargePopup').style.display='none'">OK</button>
    </div>
</div>

<!-- Popup for Failed Image URL -->
<div class="popup-container" id="imageUrlErrorPopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Error</span>
        <span class="popup-close" onclick="document.getElementById('imageUrlErrorPopup').style.display='none'">×</span>
    </div>
    <div class="popup-message">Failed to load image from the provided URL.</div>
    <div class="popup-buttons">
        <button class="popup-button" onclick="document.getElementById('imageUrlErrorPopup').style.display='none'">OK</button>
    </div>
</div>

<!-- Popup for Copy Success -->
<div class="popup-container" id="copySuccessPopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Success</span>
        <span class="popup-close" onclick="document.getElementById('copySuccessPopup').style.display='none'">×</span>
    </div>
    <div class="popup-message">Text copied!</div>
    <div class="popup-buttons">
        <button class="popup-button" onclick="document.getElementById('copySuccessPopup').style.display='none'">OK</button>
    </div>
</div>

<!-- Popup for Copy Failure -->
<div class="popup-container" id="copyFailurePopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Error</span>
        <span class="popup-close" onclick="document.getElementById('copyFailurePopup').style.display='none'">×</span>
    </div>
    <div class="popup-message">Failed to copy.</div>
    <div class="popup-buttons">
        <button class="popup-button" onclick="document.getElementById('copyFailurePopup').style.display='none'">OK</button>
    </div>
</div>

<!-- Popup for Nothing to Copy -->
<div class="popup-container" id="nothingToCopyPopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Error</span>
        <span class="popup-close" onclick="document.getElementById('nothingToCopyPopup').style.display='none'">×</span>
    </div>
    <div class="popup-message">Nothing to copy.</div>
    <div class="popup-buttons">
        <button class="popup-button" onclick="document.getElementById('nothingToCopyPopup').style.display='none'">OK</button>
    </div>
</div>

<!-- Popup for Paste Failure -->
<div class="popup-container" id="pasteFailurePopup">
    <div class="popup-header">
        <span style="font-size: 16px; font-weight: 600;">Error</span>
        <span class="popup-close" onclick="document.getElementById('pasteFailurePopup').style.display='none'">×</span>
    </div>
    <div class="popup-message">Failed to paste.</div>
    <div class="popup-buttons">
        <button class="popup-button" onclick="document.getElementById('pasteFailurePopup').style.display='none'">OK</button>
    </div>
</div>

<div class="frombs">
    <p style="color: rgb(0 96 255); text-decoration: underline; font-size: 12px; font-weight: 600; background: #00000000; padding: 5px 20px; border-radius: 100px;">More</p><br><br><br>
    <a href="https://blackswan19.github.io/Educate/songsearcher">BSongsearch</a>
    <a href="https://blackswan19.github.io/bscrop/bsweb">BsWebs</a>
    <a href="https://blackswan19.github.io/bscrop/M.clofind">Searchin</a>
    <a href="https://blackswan19.github.io/bscrop/formbs">Go to Bs-Rora</a>
    <div class="footer">
      <a href="https://blackswan19.github.io/bscrop/reminder.html" style="font-size: 16px;"><i class="fa-solid fa-calendar-day"></i></a>
    </div>
</div> 
<div class="more">
    <a href="https://blackswan19.github.io/bscrop/formbs">More FromBs</a>
</div>
<div class="blur-background" id="blurBg"></div>
<div class="background-container" id="bgContainer"></div>

<script>
    function compressImage(file, callback) {
        const img = new Image();
        const reader = new FileReader();
        reader.onload = function(e) {
            img.src = e.target.result;
            img.onload = function() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const maxWidth = 1920;
                const maxHeight = 1080;
                let width = img.width;
                let height = img.height;

                if (width > height) {
                    if (width > maxWidth) {
                        height *= maxWidth / width;
                        width = maxWidth;
                    }
                } else {
                    if (height > maxHeight) {
                        width *= maxHeight / height;
                        height = maxHeight;
                    }
                }

                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);

                let quality = 0.9;
                let compressedDataUrl;

                do {
                    compressedDataUrl = canvas.toDataURL('image/webp', quality);
                    quality -= 0.1;
                } while (compressedDataUrl.length > 5 * 1024 * 1024 && quality > 0.1);

                if (compressedDataUrl.length > 5 * 1024 * 1024) {
                    document.getElementById('imageTooLargePopup').style.display = 'block';
                    return;
                }

                callback(compressedDataUrl);
            };
        };
        reader.readAsDataURL(file);
    }

    function updateBackground(imageSrc) {
        const bgContainer = document.getElementById('bgContainer');
        const blurBg = document.getElementById('blurBg');
        document.body.style.backgroundColor = "black";
        bgContainer.style.backgroundImage = `url('${imageSrc}')`;
        blurBg.style.backgroundImage = `url('${imageSrc}')`;
    }

    function changeBackgroundColor(event) {
        const selectedColor = event.target.value;
        document.body.style.backgroundColor = selectedColor;
        localStorage.setItem('bgColor', selectedColor);
    }

    function downloadImage(imageSrc) {
        const link = document.createElement('a');
        link.href = imageSrc;
        link.download = '#BsWallper';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    async function saveWebsite(url, title) {
        if (!url.startsWith('http://') && !url.startsWith('https://')) {
            url = 'https://' + url;
        }

        if (title) {
            const savedWebsites = JSON.parse(localStorage.getItem('websites') || '[]');
            savedWebsites.push({ url, title });
            localStorage.setItem('websites', JSON.stringify(savedWebsites));
            loadWebsites();
            document.getElementById('addWebsitePopup').style.display = 'none';
        } else {
            document.getElementById('addWebsitePopup').style.display = 'none';
            document.getElementById('titleErrorPopup').style.display = 'block';
        }
    }

    function submitWebsite() {
        const url = document.getElementById('websiteUrlInput').value.trim();
        const title = document.getElementById('websiteTitleInput').value.trim();
        if (url) {
            saveWebsite(url, title);
            document.getElementById('websiteUrlInput').value = '';
            document.getElementById('websiteTitleInput').value = '';
        }
    }

    async function loadWebsites() {
        const websitesList = document.getElementById('websites-list');
        websitesList.innerHTML = '';

        const savedWebsites = JSON.parse(localStorage.getItem('websites') || '[]');

        for (const [index, website] of savedWebsites.entries()) {
            const websiteItem = document.createElement('div');
            websiteItem.classList.add('website-item');
            websiteItem.setAttribute('draggable', 'true');
            websiteItem.dataset.index = index;

            const link = document.createElement('a');
            link.href = website.url;
            link.target = '_self';

            const favicon = document.createElement('img');
            const domain = getDomain(website.url);
            favicon.src = `https://www.google.com/s2/favicons?domain=${domain}`;
            favicon.onerror = function () {
                favicon.src = 'https://i.ibb.co/kxgjrZG/sitesaved-BS.png';
            };
            favicon.alt = '';

            const title = website.title || domain;

            const deleteBtn = document.createElement('button');
            deleteBtn.classList.add('delete-btn');
            deleteBtn.innerText = '×';
            deleteBtn.onclick = function (e) {
                e.preventDefault();
                document.getElementById('deleteWebsiteMessage').innerText = `Are you sure you want to delete "${title}"?`;
                document.getElementById('deleteWebsitePopup').style.display = 'block';
                document.getElementById('confirmDeleteBtn').onclick = function() {
                    deleteWebsite(index);
                    document.getElementById('deleteWebsitePopup').style.display = 'none';
                };
            };

            link.appendChild(favicon);
            link.appendChild(document.createTextNode(title));
            websiteItem.appendChild(link);
            websiteItem.appendChild(deleteBtn);
            websitesList.appendChild(websiteItem);

            websiteItem.addEventListener('dragstart', handleDragStart);
            websiteItem.addEventListener('dragover', handleDragOver);
            websiteItem.addEventListener('drop', handleDrop);
            websiteItem.addEventListener('dragend', handleDragEnd);
        }
    }

    let draggedItem = null;

    function handleDragStart(e) {
        draggedItem = this;
        this.classList.add('dragging');
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/plain', this.dataset.index);
    }

    function handleDragOver(e) {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'move';
    }

    function handleDrop(e) {
        e.preventDefault();
        if (draggedItem !== this) {
            const allItems = [...document.querySelectorAll('.website-item')];
            const draggedIndex = parseInt(draggedItem.dataset.index);
            const droppedIndex = parseInt(this.dataset.index);
            const savedWebsites = JSON.parse(localStorage.getItem('websites') || '[]');

            const [draggedWebsite] = savedWebsites.splice(draggedIndex, 1);
            savedWebsites.splice(droppedIndex, 0, draggedWebsite);

            localStorage.setItem('websites', JSON.stringify(savedWebsites));
            loadWebsites();
        }
    }

    function handleDragEnd() {
        this.classList.remove('dragging');
        draggedItem = null;
    }

    function deleteWebsite(index) {
        const savedWebsites = JSON.parse(localStorage.getItem('websites') || '[]');
        savedWebsites.splice(index, 1);
        localStorage.setItem('websites', JSON.stringify(savedWebsites));
        loadWebsites();
    }

    function getDomain(url) {
        try {
            return new URL(url).hostname;
        } catch (e) {
            return url;
        }
    }

    function showSuggestions(value, storedInputs, suggestionsList) {
        suggestionsList.innerHTML = '';
        let activeIndex = -1;

        const storedInputsKey = 'storedInputs';

        const suggestions = value === ''
            ? storedInputs
            : storedInputs.filter(input =>
                input.toLowerCase().includes(value.toLowerCase())
            );

        if (suggestions.length === 0) {
            suggestionsList.style.display = 'none';
        } else {
            suggestionsList.style.display = 'block';
            suggestions.forEach((suggestion, index) => {
                const item = document.createElement('div');
                item.classList.add('suggestion-item');
                item.style.display = 'flex';
                item.style.justifyContent = 'space-between';
                item.style.alignItems = 'center';

                const suggestionText = document.createElement('span');
                suggestionText.textContent = suggestion;
                suggestionText.style.flex = '1';

                const deleteBtn = document.createElement('span');
                deleteBtn.textContent = '×';
                deleteBtn.style.color = 'white';
                deleteBtn.style.cursor = 'pointer';
                deleteBtn.style.fontSize = '20px';
                deleteBtn.style.fontWeight = '100';

                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    storedInputs.splice(index, 1);
                    localStorage.setItem(storedInputsKey, JSON.stringify(storedInputs));
                    showSuggestions(value, storedInputs, suggestionsList);
                });

                suggestionText.addEventListener('click', () => {
                    const urlBar = document.getElementById('url-bar');
                    urlBar.value = suggestion;
                    document.getElementById('go-button').disabled = false;
                    document.getElementById('clear-input').style.display = 'block';
                    suggestionsList.style.display = 'none';
                    const suggestionIndex = storedInputs.indexOf(suggestion);
                    if (suggestionIndex > -1) {
                        storedInputs.splice(suggestionIndex, 1);
                        storedInputs.unshift(suggestion);
                        localStorage.setItem(storedInputsKey, JSON.stringify(storedInputs));
                    }
                });

                item.appendChild(suggestionText);
                item.appendChild(deleteBtn);
                suggestionsList.appendChild(item);
            });
        }

        return activeIndex;
    }

    function navigateToUrl(value) {
        let url = value;
        if (!url.startsWith('http://') && !url.startsWith('https://')) {
            url = 'https://www.google.com/search?q=' + encodeURIComponent(value);
        }
        window.open(url, '_self');
    }

    function updateActiveSuggestion(suggestionItems, activeIndex, urlBar, goButton) {
        suggestionItems.forEach(item => item.classList.remove('active'));
        if (activeIndex >= 0) {
            const activeItem = suggestionItems[activeIndex];
            activeItem.classList.add('active');
            urlBar.value = activeItem.querySelector('span').textContent;
            goButton.disabled = false;
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        const urlBar = document.getElementById("url-bar");
        const goButton = document.getElementById('go-button');
        const clearInput = document.getElementById('clear-input');
        const suggestionsList = document.getElementById('suggestions-list');
        const customMenu = document.querySelector(".custom-menu");
        const settingsOption = document.querySelector('.settings-option');
        const settingsMenu = document.querySelector('.settings-menu');
        const recommendedBgPopup = document.getElementById('recommendedBgPopup');
        const recommendedBgGrid = document.getElementById('recommendedBgGrid');
        const downloadBgBtn = document.getElementById('downloadBgBtn');
        const addWebsiteBtn = document.querySelector('.option:not(.settings-option)');

        const storedInputsKey = 'storedInputs';
        let storedInputs = JSON.parse(localStorage.getItem(storedInputsKey)) || [];
        let activeIndex = -1;
        let selectedBgSrc = '';

        urlBar.focus();

        loadWebsites();
        const storedImage = localStorage.getItem('backgroundImage');
        if (storedImage) {
            updateBackground(storedImage);
        }
        const savedColor = localStorage.getItem('bgColor');
        if (savedColor) {
            document.body.style.backgroundColor = savedColor;
        }

        settingsOption.addEventListener('click', function() {
            settingsMenu.style.display = settingsMenu.style.display === 'block' ? 'none' : 'block';
        });

        settingsMenu.addEventListener('click', function(event) {
            const action = event.target.dataset.action;
            if (action) {
                switch (action) {
                    case 'change-bg':
                        const input = document.createElement('input');
                        input.type = 'file';
                        input.accept = 'image/*';
                        input.onchange = function(event) {
                            const file = event.target.files[0];
                            if (file) {
                                compressImage(file, function(compressedData) {
                                    try {
                                        updateBackground(compressedData);
                                        localStorage.setItem('backgroundImage', compressedData);
                                        console.log('Compressed image stored, size:', compressedData.length);
                                    } catch (error) {
                                        console.error('Failed to store image:', error);
                                        document.getElementById('imageTooLargePopup').style.display = 'block';
                                    }
                                });
                            }
                        };
                        input.click();
                        break;
                    case 'delete-bg':
                        document.getElementById('bgContainer').style.backgroundImage = '';
                        document.getElementById('blurBg').style.backgroundImage = '';
                        document.body.style.backgroundColor = "black";
                        localStorage.removeItem('backgroundImage');
                        break;
                    case 'color-picker':
                        const colorInput = document.createElement('input');
                        colorInput.type = 'color';
                        colorInput.value = localStorage.getItem('bgColor') || '#001252';
                        colorInput.onchange = function(event) {
                            changeBackgroundColor(event);
                        };
                        colorInput.click();
                        break;
                    case 'recommended-bg':
                        recommendedBgPopup.style.display = 'block';
                        break;
                    case 'import-bg-link':
                        const popup = document.createElement('div');
                        popup.className = 'popup-container';
                        popup.innerHTML = `
                            <div class="popup-header">
                                <span style="font-size: 16px; font-weight: 600;">Import Background</span>
                                <span class="popup-close" onclick="this.parentElement.parentElement.style.display='none'">×</span>
                            </div>
                            <input type="text" id="bgUrlInput" class="popup-input" placeholder="Enter image URL">
                            <div class="popup-buttons">
                                <button class="popup-button" onclick="importBackground()">Import</button>
                            </div>
                        `;
                        document.body.appendChild(popup);
                        popup.style.display = 'block';
                        break;
                }
                settingsMenu.style.display = 'none';
            }
        });

        function importBackground() {
            const imageUrl = document.getElementById('bgUrlInput').value.trim();
            if (imageUrl) {
                const img = new Image();
                img.crossOrigin = "Anonymous";
                img.src = imageUrl;
                img.onload = function() {
                    updateBackground(imageUrl);
                    localStorage.setItem('backgroundImage', imageUrl);
                    document.querySelector('.popup-container').remove();
                };
                img.onerror = function() {
                    document.querySelector('.popup-container').remove();
                    document.getElementById('imageUrlErrorPopup').style.display = 'block';
                };
            }
        }

        recommendedBgGrid.addEventListener('click', function(event) {
            if (event.target.classList.contains('recommended-bg-item')) {
                selectedBgSrc = event.target.src;
                updateBackground(selectedBgSrc);
                localStorage.setItem('backgroundImage', selectedBgSrc);
                recommendedBgPopup.style.display = 'none';
            }
        });

        downloadBgBtn.addEventListener('click', function() {
            if (selectedBgSrc) {
                downloadImage(selectedBgSrc);
            } else {
                const popup = document.createElement('div');
                popup.className = 'popup-container';
                popup.innerHTML = `
                    <div class="popup-header">
                        <span style="font-size: 16px; font-weight: 600;">Error</span>
                        <span class="popup-close" onclick="this.parentElement.parentElement.style.display='none'">×</span>
                    </div>
                    <div class="popup-buttons">
                        <button class="popup-button" onclick="this.parentElement.parentElement.style.display='none'">OK</button>
                    </div>
                `;
                document.body.appendChild(popup);
                popup.style.display = 'block';
            }
        });

        document.addEventListener('click', function(event) {
            if (!settingsOption.contains(event.target) && !settingsMenu.contains(event.target)) {
                settingsMenu.style.display = 'none';
            }
            if (!recommendedBgPopup.contains(event.target) && !event.target.dataset.action === 'recommended-bg') {
                recommendedBgPopup.style.display = 'none';
            }
        });

        addWebsiteBtn.addEventListener('click', async function () {
            document.getElementById('addWebsitePopup').style.display = 'block';
        });

        urlBar.addEventListener('input', function () {
            const value = urlBar.value.trim();
            goButton.disabled = value === '';
            clearInput.style.display = value ? 'block' : 'none';
            activeIndex = showSuggestions(value, storedInputs, suggestionsList);
        });

        urlBar.addEventListener('focus', function () {
            const value = urlBar.value.trim();
            activeIndex = showSuggestions(value || '', storedInputs, suggestionsList);
        });

        clearInput.addEventListener('click', function () {
            urlBar.value = '';
            goButton.disabled = true;
            clearInput.style.display = 'none';
            suggestionsList.innerHTML = '';
            suggestionsList.style.display = 'none';
        });

        goButton.addEventListener('click', function () {
            const value = urlBar.value.trim();
            if (value) {
                if (!storedInputs.includes(value)) {
                    storedInputs.unshift(value);
                    localStorage.setItem(storedInputsKey, JSON.stringify(storedInputs));
                } else {
                    const index = storedInputs.indexOf(value);
                    storedInputs.splice(index, 1);
                    storedInputs.unshift(value);
                    localStorage.setItem(storedInputsKey, JSON.stringify(storedInputs));
                }
                navigateToUrl(value);
            }
        });

        urlBar.addEventListener('keydown', function (e) {
            const suggestionItems = document.querySelectorAll('.suggestion-item');
            if (e.key === 'Enter') {
                if (activeIndex >= 0 && suggestionItems[activeIndex]) {
                    const selectedText = suggestionItems[activeIndex].querySelector('span').textContent;
                    urlBar.value = selectedText;
                    goButton.disabled = false;
                    clearInput.style.display = 'block';
                    suggestionsList.style.display = 'none';
                    const suggestionIndex = storedInputs.indexOf(selectedText);
                    if (suggestionIndex > -1) {
                        storedInputs.splice(suggestionIndex, 1);
                        storedInputs.unshift(selectedText);
                        localStorage.setItem(storedInputsKey, JSON.stringify(storedInputs));
                    }
                    goButton.click();
                } else {
                    goButton.click();
                }
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                if (activeIndex < suggestionItems.length - 1) {
                    activeIndex++;
                    updateActiveSuggestion(suggestionItems, activeIndex, urlBar, goButton);
                }
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                if (activeIndex > 0) {
                    activeIndex--;
                    updateActiveSuggestion(suggestionItems, activeIndex, urlBar, goButton);
                }
            }
        });

        document.addEventListener("click", (event) => {
            if (!document.querySelector('.search-wrapper').contains(event.target)) {
                suggestionsList.style.display = 'none';
            }
            customMenu.style.display = "none";
        });

        customMenu.addEventListener("click", (event) => {
            const action = event.target.dataset.action;
            if (action) {
                switch (action) {
                    case "copy":
                        if (urlBar.value) {
                            navigator.clipboard.writeText(urlBar.value)
                                .then(() => {
                                    document.getElementById('copySuccessPopup').style.display = 'block';
                                })
                                .catch(() => {
                                    document.getElementById('copyFailurePopup').style.display = 'block';
                                });
                        } else {
                            document.getElementById('nothingToCopyPopup').style.display = 'block';
                        }
                        break;
                    case "paste":
                        urlBar.focus();
                        navigator.clipboard.readText()
                            .then((text) => {
                                urlBar.value = text;
                                goButton.disabled = text.trim() === '';
                                clearInput.style.display = text ? 'block' : 'none';
                                activeIndex = showSuggestions(text, storedInputs, suggestionsList);
                            })
                            .catch((err) => {
                                console.error("Failed to read clipboard:", err);
                                document.getElementById('pasteFailurePopup').style.display = 'block';
                            });
                        break;
                    case "new-tab":
                        window.open("https://blackswan19.github.io/bscrop/bsearchin", "_blank");
                        break;
                }
                customMenu.style.display = "none";
            }
        });
    });
</script>
</body>
</html>
