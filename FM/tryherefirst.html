<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify my account</title>
    <link rel="icon" type="image/x-icon" href="https://i.pinimg.com/736x/68/3d/8f/683d8f58c98a715130b1251a9d59d1b9.jpg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald|Noto+Sans">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
        :root {
            --user-accent: #00aaff;
            --telegram-accent: #0088cc;
        }
        * {
            -webkit-tap-highlight-color: transparent;
            font-family: 'Poppins', sans-serif;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: rgb(24 24 25);
            color: #e0e0e0;
            letter-spacing: 0.5px;
        }
        body.light {
            background-color: #ffffff;
            color: #000000;
        }
        body.telegram-dark {
            background-color: #18222d;
            color: #ffffff;
        }
        body.my-own {
            background-color: rgb(10 10 10);
            color: #e0e0e0;
        }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgb(10 10 10);
            padding: 10px 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }
        body.light .header {
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        body.telegram-dark .header {
            background-color: #242f3e;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        body.my-own .header {
            background-color: rgb(10 10 10);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        .header h2 {
            font-size: 18px;
            font-weight: 500;
            margin-left: 10px;
            color: #00aaff;
        }
        body.light .header h2 {
            color: #0066cc;
        }
        body.telegram-dark .header h2 {
            color: var(--telegram-accent);
        }
        body.my-own .header h2 {
            color: var(--user-accent);
        }
        #passwordContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
            text-align: center;
            line-height: 15px;
            position: fixed;
        }
        #userPassword {
            font-size: 16px;
            border: solid 1.5px transparent;
            background: rgb(44 44 44);
            color: #fff;
            padding: 8px 25px;
            text-align: center;
            width: 90%;
            outline: none;
            max-width: 280px;
            margin: 26px;
            border-radius: 10px;
            font-weight: 100;
            letter-spacing: 0.6px;
        }
        body.light #userPassword {
            background: #f0f0f0;
            color: #000000;
        }
        body.telegram-dark #userPassword {
            background: #2a3545;
            color: #ffffff;
        }
        body.my-own #userPassword {
            background: rgb(33 33 33);
            color: #fff;
        }
        #userPassword:focus {
            background: #3a3a3a;
        }
        body.light #userPassword:focus {
            background: #e0e0e0;
        }
        body.telegram-dark #userPassword:focus {
            background: #3a4b5e;
        }
        body.my-own #userPassword:focus {
            background: #3a3a3a;
        }
        #submitBtn {
            background-color: #00aaff;
            color: #000000;
            border: none;
            font-size: 15px;
            cursor: pointer;
            padding: 7.5px 30px;
            font-weight: 500;
            border-radius: 10px;
        }
        body.light #submitBtn {
            background-color: #0066cc;
            color: #ffffff;
        }
        body.telegram-dark #submitBtn {
            background-color: var(--telegram-accent);
            color: #ffffff;
        }
        body.my-own #submitBtn {
            background-color: var(--user-accent);
            color: #000000;
        }
        body.sharp #userPassword,
        body.sharp #submitBtn {
            border-radius: 0;
        }
        a {
            color: #848484;
            text-decoration: none;
        }
        body.light a {
            color: #0066cc;
        }
        body.telegram-dark a {
            color: var(--telegram-accent);
        }
        body.my-own a {
            color: var(--user-accent);
        }
        #error-message {
            color: #ff1c1c;
            font-size: 12px;
            margin-top: 10px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgb(24 24 25);
            padding: 65px 0px 0px 20px;
            line-height: 30px;
            overflow-y: scroll;
            z-index: 10000000;
            scrollbar-width: none;
        }
        body.light .modal {
            background-color: #ffffff;
        }
        body.telegram-dark .modal {
            background-color: #18222d;
        }
        body.my-own .modal {
            background-color: rgb(10 10 10);
        }
        .modal h2 {
            color: #e0e0e0;
            font-weight: 500;
        }
        body.light .modal h2 {
            color: #000000;
        }
        body.telegram-dark .modal h2 {
            color: #ffffff;
        }
        body.my-own .modal h2 {
            color: #e0e0e0;
        }
        .modal h3 {
            color: #00aeff;
            font-size: 16px;
            font-weight: 400;
            text-decoration: underline;
            margin: 25px 0;
        }
        body.light .modal h3 {
            color: #0066cc;
        }
        body.telegram-dark .modal h3 {
            color: var(--telegram-accent);
        }
        body.my-own .modal h3 {
            color: var(--user-accent);
        }
       
        .modal p {
            color: #a0a0a0;
            font-size: 14px;
            font-weight: 400;
            margin: 10px 0;
            transition: color 0.3s ease;
        }
        body.light .modal p {
            color: #666666;
        }
        body.telegram-dark .modal p {
            color: #a0a9b2;
        }
        body.my-own .modal p {
            color: #a0a0a0;
        }
        .close-btn {
            position: fixed;
            top: 15px;
            left: 15px;
            color: #e0e0e0;
            font-size: 18px;
            cursor: pointer;
            z-index: 11;
            background: #2c2c2c;
            padding: 10px 11px;
            border-radius: 10px;
        }
        body.light .close-btn {
            background: #f0f0f0;
            color: #000000;
        }
        body.telegram-dark .close-btn {
            background: #2a3545;
            color: #ffffff;
        }
        body.my-own .close-btn {
            background: #1d1d1d;
            color: #e0e0e0;
            border: solid 1.4px var(--user-accent);
        }
        body.sharp .close-btn {
            border-radius: 0;
        }
        i {
            margin-right: 8px;
        }
        .logo {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 11;
        }
        .logo img {
            width: 40px;
            border-radius: 50%;
        }
        body.sharp .logo img {
            border-radius: 0;
        }
        .logout-btn {
            position: fixed;
            top: 55px;
            right: 5px;
            background-color: #1d1d1d;
            color: #e0e0e0;
            border: none;
            padding: 5px 12px;
            font-size: 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            z-index: 11;
        }
        body.light .logout-btn {
            background-color: #f0f0f0;
            color: #000000;
        }
        body.telegram-dark .logout-btn {
            background-color: #2a3545;
            color: #ffffff;
        }
        body.my-own .logout-btn {
            background-color: #1d1d1d;
            color: #e0e0e0;
            border: solid 1.4px var(--user-accent);
        }
        body.sharp .logout-btn {
            border-radius: 0;
        }
        .logout-btn a {
            color: #e0e0e0;
            text-decoration: none;
        }
        body.light .logout-btn a {
            color: #000000;
        }
        body.telegram-dark .logout-btn a {
            color: #ffffff;
        }
        body.my-own .logout-btn a {
            color: var(--user-accent);
        }
        .logout-btn:hover {
            background-color: #3a3a3a;
        }
        body.light .logout-btn:hover {
            background-color: #e0e0e0;
        }
        body.telegram-dark .logout-btn:hover {
            background-color: #3a4b5e;
        }
        body.my-own .logout-btn:hover {
            background-color: #3a3a3a;
        }
        .loan-entry {
            padding: 10px 0px;
            margin-bottom: 20px;
            border-bottom: none;
            width: 98%;
            padding-bottom: 30px;
        }
        ::-webkit-scrollbar {
            width: 10px;
        }
        .amount-buttons {
                  display: flex
;
    gap: 20px;
    margin: -10px 0px 0px -20px;
    overflow-x: scroll;
    white-space: nowrap;
    position: sticky;
    top: -67px;
    background-color: #00000033;
    z-index: 1000;
    backdrop-filter: blur(5px);
    padding: 25px 15px 10px 15px;
    width: 105%;
    border-bottom: solid 1px #ffffff1a;
        }
        body.light .amount-buttons {
           background-color: #f7f7f7d9;
    border-bottom: solid 1px #0000004d;
}
        .amount-btn {
            background-color: rgb(33 33 33);
            color: #e0e0e0;
            
            border: none;
            padding: 10px 20px;
            font-size: 12px;
            border-radius: 10px 0px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            position: relative;
        }
        body.light .amount-btn {
            background-color: #f0f0f0;
            color: #000000;
        }
        body.telegram-dark .amount-btn {
            background-color: #2a3545;
            color: #ffffff;
        }
        body.my-own .amount-btn {
            background-color: rgb(33 33 33);
            color: #e0e0e0;
            border: solid 1.4px var(--user-accent);
        }
        .amount-btn:hover {
            background-color: #434343;
            color: rgb(255, 255, 255);
        }
        body.light .amount-btn:hover {
            background-color: #e0e0e0;
        }
        body.telegram-dark .amount-btn:hover {
            background-color: #3a4b5e;
        }
        body.my-own .amount-btn:hover {
            background-color: #434343;
        }
        .amount-btn.active {
            background-color: #00aef8;
            color: #000000;
        }
        body.light .amount-btn.active {
            background-color: #0066cc;
        }
        body.telegram-dark .amount-btn.active {
            background-color: var(--telegram-accent);
        }
        body.my-own .amount-btn.active {
            background-color: var(--user-accent);
        }
        .amount-btn .amount-id {
            position: absolute;
            top: -10px;
            right: 0px;
            font-size: 10px;
            color: #00aeff;
            background-color: rgb(10 10 10);
            padding: 3px 10px;
            border-radius: 0px 8px;
        }
        body.light .amount-btn .amount-id {
            color: #0066cc;
            background-color: #ffffff;
        }
        body.telegram-dark .amount-btn .amount-id {
            color: var(--telegram-accent);
            background-color: #18222d;
        }
        body.my-own .amount-btn .amount-id {
            color: var(--user-accent);
            background-color: rgb(10 10 10);
        }
        body.sharp .amount-btn {
            border-radius: 0;
        }
        .notice {
            font-weight: 200;
            font-size: 12px;
            line-height: 20px;
            position: fixed;
            bottom: 60px;
            color: #ffffffd4;
            padding: 10px;
            border: solid 1.4px #9595954d;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
        }
        body.light .notice {
            color: #666666;
            border-color: #9595954d;
        }
        body.telegram-dark .notice {
            color: #a0a9b2;
            border-color: #9595954d;
        }
        body.my-own .notice {
            color: #ffffffd4;
            border: solid 1.4px var(--user-accent);
        }
        body.sharp .notice {
            border-radius: 0;
        }
        .powered-by {
            position: fixed;
            top: 11px;
            font-size: 10px;
            color: #000000;
            z-index: 1000;
            background: #ffffff;
            text-align: center;
            padding: 6px 15px;
            display: none;
            border-radius: 8px;
        }
        body.light .powered-by {
            background: #f0f0f0;
        }
        body.telegram-dark .powered-by {
            background: #2a3545;
        }
        body.my-own .powered-by {
            background: #ffffff;
        }
        body.sharp .powered-by {
            border-radius: 0;
        }
        
        .membership-type {
            color: #00aeff;
            font-size: 14px;
            font-weight: 400;
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        body.light .membership-type {
            color: #0066cc;
        }
        body.telegram-dark .membership-type {
            color: var(--telegram-accent);
        }
        body.my-own .membership-type {
            color: var(--user-accent);
        }
        .membership-icon {
            width: 18px;
            height: 18px;
        }
        .user-icon {
            width: 25px;
            height: 25px;
        }
        p#membershipType {
            font-size: 11px;
            color: #ff66f9;
            padding: 0px;
            font-weight: 300;
        }
        .profile-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        .profile-picture {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 33px;
            font-weight: 900;
            color: #000;
            background-size: cover;
            background-position: center;
        }
        body.sharp .profile-picture {
            border-radius: 0;
        }
        .amounts-btn {
            background-color: #ffffff;
            color: black;
            border: none;
            padding: 1px 5px;
            font-size: 10px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 2px;
            margin-top: 10px;
        }
        body.light .amounts-btn {
            background-color: #f0f0f0;
        }
        body.telegram-dark .amounts-btn {
            background-color: #2a3545;
        }
        body.my-own .amounts-btn {
            background-color: #ffffff;
            border: solid 1.4px var(--user-accent);
        }
        .amounts-btn:hover {
            background-color: #ffffffd4;
        }
        body.light .amounts-btn:hover {
            background-color: #e0e0e0;
        }
        body.telegram-dark .amounts-btn:hover {
            background-color: #3a4b5e;
        }
        body.my-own .amounts-btn:hover {
            background-color: #ffffffd4;
        }
        body.sharp .amounts-btn {
            border-radius: 0;
        }
        .amounts-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 10000001;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            
        }
        .amounts-modal-content {
            background-color: #1a1a1a;
            padding: 20px;
            border-radius: 30px;
            width: 90%;
            max-width: 400px;
            color: #e0e0e0;
            position: relative;
            line-height: 42px;
            
        }
        body.light .amounts-modal-content {
            background-color: #f0f0f0;
            color: #000000;
        }
        body.telegram-dark .amounts-modal-content {
            background-color: #242f3e;
            color: #ffffff;
        }
        body.my-own .amounts-modal-content {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        body.sharp .amounts-modal-content {
            border-radius: 0;
        }
        .amounts-close-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            color: #e0e0e0d4;
            font-size: 25px;
            cursor: pointer;
            font-weight: 100;
        }
        body.light .amounts-close-btn {
            color: #666666;
        }
        body.telegram-dark .amounts-close-btn {
            color: #a0a9b2;
        }
        body.my-own .amounts-close-btn {
            color: #e0e0e0d4;
        }
        span#userName {
            color: white;
        }
        body.light span#userName {
            color: #000000;
        }
        body.telegram-dark span#userName {
            color: #ffffff;
        }
        body.my-own span#userName {
            color: white;
        }
        span {
            color: #00c6ff;
        }
        body.light span {
            color: #0066cc;
        }
        body.telegram-dark span {
            color: var(--telegram-accent);
        }
        body.my-own span {
            color: var(--user-accent);
        }
        .reminder-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 10000002;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
        }
        .reminder-modal-content {
            background-color: #1a1a1a;
            padding: 20px;
            border-radius: 30px;
            width: 90%;
            max-width: 400px;
            color: #e0e0e0;
            position: relative;
            line-height: 24px;
            text-align: center;
        }
        body.light .reminder-modal-content {
            background-color: #f0f0f0;
            color: #000000;
        }
        body.telegram-dark .reminder-modal-content {
            background-color: #242f3e;
            color: #ffffff;
        }
        body.my-own .reminder-modal-content {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        body.sharp .reminder-modal-content {
            border-radius: 0;
        }
        .reminder-close-btn {
            color: white;
    font-size: medium;
    cursor: pointer;
    font-weight: 400;
    background: #008bd1;
    padding: 5px 16px;
    display: block;
    border-radius: 32px;
        }
        body.light .reminder-close-btn {
            color: white;
        }
        body.telegram-dark .reminder-close-btn {
            color:white;
        }
        body.my-own .reminder-close-btn {
            color: #e0e0e0d4;
        }
        .reminder-modal-content p {
                color: #a8a8a8;
    margin: 15px 0;
    font-size: 13px;
    font-weight: 400;
        }
        body.light .reminder-modal-content p {
            color: #000000;
        }
        body.telegram-dark .reminder-modal-content p {
            color: #ffffff;
        }
        body.my-own .reminder-modal-content p {
            color: #ffffff;
        }
        .reminder-modal-content h3 {
            color: #00aeff;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        body.light .reminder-modal-content h3 {
            color: #0066cc;
        }
        body.telegram-dark .reminder-modal-content h3 {
            color: var(--telegram-accent);
        }
        body.my-own .reminder-modal-content h3 {
            color: var(--user-accent);
        }
        .stars-display {
                position: fixed;
    top: 15px;
    right: 15px;
    color: #e0e0e0;
    font-weight: 500;
    display: flex
;
    align-items: center;
    gap: 0px;
    z-index: 11;
    justify-content: center;
    font-weight: 600;
        }
        body.light .stars-display {
            color: #000000;
        }
        body.telegram-dark .stars-display {
            color: #ffffff;
        }
        body.my-own .stars-display {
            color: var(--user-accent);
        }
        hr{
                background: #80808061;
    width: 96%;
    height: 1.5px;
    border: none;
    max-width: 400px;
    outline: none;
        }
        
    </style>
</head>
<body>
    <div id="passwordContainer">
        <center><img style="width: 60px;" src="https://raw.githubusercontent.com/goforbg/telegram-emoji-gifs/refs/heads/master/lock-key.gif" alt=""></center>
        <h2 style="font-weight: 400; font-size: 20px; color: white;">Verify my account </h2>
        <input type="text" id="userPassword" placeholder="Enter password" autocomplete="current-password">
        <button id="submitBtn">Verify</button><br>
        <p id="error-message"></p>
        <div class="notice">
            You should return the money before the due date, If not additional interest will be charged.
        </div>
    </div>

    <div id="userInfoModal" class="modal">
        <img style="    position: fixed;
    bottom: 5px;
    right: 5px;
    width: 15%;max-width: 60px;
" src="https://raw.githubusercontent.com/goforbg/telegram-emoji-gifs/refs/heads/master/thunder.gif" alt="">
        <span><i class="fa-solid fa-arrow-left close-btn" onclick="closeModal()"></i></span>
        <div class="stars-display" id="starsDisplay">
            <i style="margin: 5px;" class="fa-solid fa-star"></i><span style="font-size: 18px;    margin-top: 2px;" id="starCount"></span>
        </div>
        <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">Borrower</h3>
        <div class="profile-container">
            <div class="profile-picture" id="profilePicture"></div>
            <div>
                <p id="userNameContainer" style="font-size: 20px; display: flex; gap: 5px; justify-content: center; align-items: center;">
                    <span style="color: white;" id="userName"></span>
                </p>
                <button class="amounts-btn" onclick="showAmountsModal()">
                    <i class="fa-solid fa-eye" style="margin-right: 2px;"></i> Amounts
                </button>
                <button class="amounts-btn" onclick="downloadAllLoans()">
                    <i class="fa-solid fa-download" style="margin-right: 2px;"></i> Download All
                </button>
                <p id="membershipType" class="membership-type"></p>
            </div>
        </div>
        <div class="amount-buttons" id="amountButtons"></div>


         <div class="about" style="width: 98%;
    display: flex
;
    background: #6c6c6c1f;
    justify-content: center;
    align-items: center;
    gap: 20px;
    padding: 13px;
    border-radius: 28px;
    margin-top: 18px;
    max-width: 615px;
    border: none;">
       <h2 style="    text-align: center;
    font-size: 11px;
    margin: 0px;
    font-weight: 400;
    opacity: 80%;    color: revert;">Sponsored</h2>
      <a href="https://mfi0212.github.io/MFI/paymine" target="_blank" ><img style="    width: 100%;
    border-radius: 25px;
    padding: 0px;
    max-width: 400px;
    margin-bottom: -10px;
    opacity: 80%;" src="addvertisement.png" alt=""></a>
    </div>
        <div id="loanDetails"></div>
    </div>
    <div id="amountsModal" class="amounts-modal" style="display: none;">
        <div class="amounts-modal-content">
            <span class="amounts-close-btn" onclick="closeAmountsModal()">×</span>
            <h3 style="text-decoration: underline; margin-bottom: 5px; font-weight: 900; font-size: 16px; text-align: center;">Total Amount</h3>
            <p><i class="fa-solid fa-money-bill"></i> Total Taken Amount: <span id="totalTaken"></span> ₹</p>
            <p><i class="fa-solid fa-arrow-up-wide-short"></i> Total Interest: <span id="totalInterest"></span> ₹</p>
            <hr>
            <p><i class="fa-solid fa-money-check-alt"></i> Total Amount to Return: <span id="totalReturn"></span> ₹</p>
        </div>
    </div>
    <div id="reminderModal" class="reminder-modal" style="display: none;">
        <div class="reminder-modal-content">
            <h3>Reminder.!</h3>
            <p id="reminderMessage"></p>
            <span class="reminder-close-btn" onclick="closeReminderModal()">Okay</span>
        </div>
    <!-- </div><script src="accverify.js"></script> -->
    <div class="mfi" style="position: fixed; bottom: 10px; font-size: 10px; color: #848484; z-index: 1000; background: transparent; width: 100%; text-align: center; padding: 10px;">
        <a target="_blank" style="text-decoration: none;" href="https://mfi0212.github.io/MFI/mfimain">By Myootive</a>
    </div>
    <div class="powered-by" id="poweredBy">
        Powered by <a style="color: rgb(0, 0, 0); font-weight: 500;" href="https://blackswan19.github.io/Educate/password">BsPsgenerater</a>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Load saved theme
            const savedTheme = localStorage.getItem("theme") || "dark";
            if (savedTheme === "my-own") {
                const accentColor = localStorage.getItem("user-accent") || "#00aaff";
                document.documentElement.style.setProperty("--user-accent", accentColor);
            }
            document.body.classList.add(savedTheme);

            // Load saved edge style
            const savedEdgeStyle = localStorage.getItem("edgeStyle") || "curvy";
            if (savedEdgeStyle === "sharp") {
                document.body.classList.add("sharp");
            }
        });
    </script>
    <script>
        
        document.addEventListener("DOMContentLoaded", () => {
            const customMenu = document.querySelector(".custom-menu");

            // document.addEventListener("contextmenu", (event) => {
            //     event.preventDefault();
            //     if (customMenu) {
            //         customMenu.style.display = "block";
            //         customMenu.style.top = `${event.pageY}px`;
            //         customMenu.style.left = `${event.pageX}px`;
            //     }
            // });

            document.addEventListener("click", () => {
                if (customMenu) {
                    customMenu.style.display = "none";
                }
            });
        });
        

const passwords = {
            "4211": {
                name: "Chaitanya Harsha",
                membershipType: "Premium - Mini",
                membershipIcon: "https://cdn-icons-png.flaticon.com/512/7641/7641727.png",
                fineRate: 5,
                profileBackground: "#ff4d4d",
                stars: 0,
                loans: [
                    {
                        planDate: "24-05-2025",
                        endDate: "01-09-2025",
                        interest: 5500,
                        takenAmount: 15000,
                        takenFrom: "MLending"
                    },
                    {
                        planDate: "07-04-2025",
                        endDate: "01-09-2025",
                        interest: 4800,
                        takenAmount: 10000,
                        takenFrom: "MLLD"
                    },
                ]
            },
            "Ganesh@5577": {
                name: "J Ganesh",
                membershipType: "",
                membershipIcon: "https://cdn-icons-png.flaticon.com/512/7641/7641727.png",
                fineRate: 5,
                profileBackground: "#ff7300",
                stars: 0,
                loans: [
                    {
                        planDate: "20-08-2025",
                        endDate: "01-09-2025",
                        interest: 550,
                        takenAmount: 3200,
                        takenFrom: "MLLD"
                    },
                ]
            },
           "6275": {
                name: "Srikanth Jampana",
                membershipType: "Premium - Mini",
                membershipIcon: "https://cdn-icons-png.flaticon.com/512/7641/7641727.png",
                fineRate: 30,
                profileBackground: "red",
                stars: 205,
                loans: [
{
                        planDate: "21-08-2025",
                        endDate: "24-08-2025",
                        interest: 560,
                        takenAmount: 12300,
                        takenFrom: "Golden"
                    },
                    {
                        planDate: "10-08-2025",
                        endDate: "25-08-2025",
                        interest: 1360,
                        takenAmount: 5000,
                        takenFrom: "MLLD"
                    },
                     {
                        planDate: "15-08-2025",
                        endDate: "30-08-2025",
                        interest: 4800,
                        takenAmount: 20000,
                        takenFrom: "MLending"
                    },
                     {
                        planDate: "16-08-2025",
                        endDate: "31-08-2025",
                        interest: 1250,
                        takenAmount: 5000,
                        takenFrom: "MLLD"
                    },
                    {
                      planDate: "18-08-2025",
                        endDate: "02-09-2025",
                        interest: 480,
                        takenAmount: 5500,
                        takenFrom: "MLLD"
                    },
                    {
                      planDate: "18-08-2025",
                        endDate: "02-09-2025",
                        interest: 620,
                        takenAmount: 2000,
                        takenFrom: "MLLD"
                    },
                ]
            },
            "Mahesh888*": {
                name: "Mahesh Muthinti",
                membershipType: "Premium - Mini",
                membershipIcon: "https://cdn-icons-png.flaticon.com/512/7641/7641727.png",
                fineRate: 0,
                profileBackground: "#00ff00",
                stars: 0,
                loans: [
                    {
                        planDate: "28-06-2025",
                        endDate: "02-09-2025(Extanded to 30 days)",
                        interest: 3100,
                        takenAmount: 11500,
                        takenFrom: "MLending"
                    },
                    {
                        planDate: "01-06-2025",
                        endDate: "19-09-2025(Extanded to 30 days)",
                        interest: 3260,
                        takenAmount: 5000,
                        takenFrom: "MLLD Offer"
                    },
                    {
                        planDate: "25-05-2025",
                        endDate: "24-09-2025(Extanded to 30 days)",
                        interest: 2080,
                        takenAmount: 5000,
                        takenFrom: "MLLD offer"
                    },
                ]
            },
            "Cherish@123": {
                name: "Cherish",
                membershipType: "Premium - Mini",
                membershipIcon: "https://cdn-icons-png.flaticon.com/512/7641/7641727.png",
                fineRate: 3,
                profileBackground: "rgb(255 138 0)",
                stars: 0,
                loans: [
                    {
                        planDate: "21-05-2025",
                        endDate: "15-08-2025",
                        interest: 2100,
                        takenAmount: 5000,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "29-05-2025",
                        endDate: "01-09-2025",
                        interest: 5500,
                        takenAmount: 15000,
                        takenFrom: "MLending"
                    },
                    {
                        planDate: "23-05-2025",
                        endDate: "01-09-2025",
                        interest: 1820,
                        takenAmount: 3800,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "28-05-2025",
                        endDate: "01-09-2025",
                        interest: 0,
                        takenAmount: 2600,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "25-05-2025",
                        endDate: "01-09-2025",
                        interest: 0,
                        takenAmount: 3000,
                        takenFrom: "MLLD(Offer)"
                    },
                    {
                        planDate: "24-05-2025",
                        endDate: "01-09-2025",
                        interest: 0,
                        takenAmount: 4200,
                        takenFrom: "MLLD(Offer)"
                    },
                   
                ]
            },
        };

        let sessionReferenceTime = null;

        document.addEventListener("DOMContentLoaded", () => {
            const savedPassword = localStorage.getItem("userPassword");
            if (savedPassword) {
                const passwordInput = document.getElementById("userPassword");
                passwordInput.value = savedPassword;
                document.getElementById("poweredBy").style.display = "block";
            }
        });

        document.getElementById("submitBtn").addEventListener("click", () => {
            const userInput = document.getElementById("userPassword").value.trim();
            const errorMessage = document.getElementById("error-message");
            const user = passwords[userInput];

            if (!userInput) {
                errorMessage.textContent = "Enter a password.";
                return;
            }

            if (user) {
                localStorage.setItem("userPassword", userInput);
                document.getElementById("userName").textContent = user.name;
                document.getElementById("starCount").textContent = user.stars;
                const membershipTypeContainer = document.getElementById("membershipType");
                membershipTypeContainer.innerHTML = `
                    <a href="https://mfi0212.github.io/MFI/starpre" style="text-decoration: underline; text-underline-position: under;">${user.membershipType}</a>
                `;

                const userNameContainer = document.getElementById("userNameContainer");
                userNameContainer.innerHTML = `
                    <span id="userName">${user.name}</span>
                    <img src="${user.membershipIcon}" alt="${user.membershipType} Icon" class="user-icon">
                `;

                const profilePicture = document.getElementById("profilePicture");
                profilePicture.style.backgroundColor = user.profileBackground;
                const nameParts = user.name.trim().split(/\s+/).slice(0, 2);
                const iconText = nameParts.map(part => part.charAt(0)).join("").toUpperCase();
                profilePicture.style.backgroundImage = "none";
                profilePicture.textContent = iconText;

                const amountButtons = document.getElementById("amountButtons");
                amountButtons.innerHTML = "";

                user.loans.forEach((loan, index) => {
                    const btn = document.createElement("button");
                    btn.className = "amount-btn";
                    btn.innerHTML = `${loan.takenAmount} Rupees <span class="amount-id">Amount ${index + 1}</span>`;
                    btn.onclick = () => displayLoanDetails(loan, index);
                    amountButtons.appendChild(btn);
                });

                if (user.loans.length > 0) {
                    displayLoanDetails(user.loans[0], 0);
                    checkDueToday(user);
                } else {
                    errorMessage.textContent = "No active loans found.";
                }

                document.getElementById("userInfoModal").style.display = "block";
                document.getElementById("passwordContainer").style.display = "none";
                errorMessage.textContent = "";
            } else {
                errorMessage.textContent = "Invalid password.";
            }
        });

        function checkDueToday(user) {
            const today = new Date();
            const dateFormat = /^(\d{2})-(\d{2})-(\d{4})/;
            const todayStr = `${String(today.getDate()).padStart(2, '0')}-${String(today.getMonth() + 1).padStart(2, '0')}-${today.getFullYear()}`;

            user.loans.forEach(loan => {
                const cleanEndDate = loan.endDate.split('(')[0].split('<')[0];
                const endMatch = cleanEndDate.match(dateFormat);
                if (endMatch) {
                    const endDateStr = `${endMatch[1]}-${endMatch[2]}-${endMatch[3]}`;
                    if (endDateStr === todayStr && !loan.endDate.includes('Overdue')) {
                        document.getElementById("reminderMessage").textContent = 
                            `Mr. ${user.name}, Today(${cleanEndDate}) you have a amount to return which you have taken from the servive (${loan.takenFrom}).Try to clear on time if not overdue fine amount will be added. Thank you!`;
                        document.getElementById("reminderModal").style.display = "flex";
                    }
                }
            });
        }

        function closeReminderModal() {
            document.getElementById("reminderModal").style.display = "none";
        }

        function calculateDaysBetween(startDate, endDate) {
            try {
                const dateFormat = /^(\d{2})-(\d{2})-(\d{4})/;
                const startMatch = startDate.match(dateFormat);
                const endMatch = endDate.split('(')[0].match(dateFormat);
                if (startMatch && endMatch) {
                    const start = new Date(`${startMatch[3]}-${startMatch[2]}-${startMatch[1]}`);
                    const end = new Date(`${endMatch[3]}-${endMatch[2]}-${endMatch[1]}`);
                    if (isNaN(start) || isNaN(end)) {
                        return "Invalid date";
                    }
                    const diffTime = Math.abs(end - start);
                    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                }
                return "Invalid date format";
            } catch (error) {
                console.error("Error calculating days:", error);
                return "Error";
            }
        }

        function calculateOverdueFine(endDate, user) {
            try {
                const dateFormat = /^(\d{2})-(\d{2})-(\d{4})/;
                const endMatch = endDate.split('(')[0].split('<')[0].match(dateFormat);
                if (!endMatch) return { overdue: false, fine: 0, hoursOverdue: 0 };

                const end = new Date(`${endMatch[3]}-${endMatch[2]}-${endMatch[1]}`);
                end.setHours(23, 59, 59, 999);

                if (!sessionReferenceTime) {
                    sessionReferenceTime = new Date();
                }
                const now = sessionReferenceTime;

                if (now > end) {
                    const diffTime = now - end;
                    const hoursOverdue = Math.floor(diffTime / (1000 * 60 * 60));
                    const fine = hoursOverdue * user.fineRate;
                    return { overdue: true, fine: fine, hoursOverdue: hoursOverdue };
                }
                return { overdue: false, fine: 0, hoursOverdue: 0 };
            } catch (error) {
                console.error("Error calculating overdue fine:", error);
                return { overdue: false, fine: 0, hoursOverdue: 0 };
            }
        }

        function displayLoanDetails(loan, index) {
            const loanDetails = document.getElementById("loanDetails");
            const userInput = document.getElementById("userPassword").value.trim();
            const user = passwords[userInput];

            if (!loan.hasOwnProperty('cachedFine')) {
                const overdueInfo = calculateOverdueFine(loan.endDate, user);
                if (overdueInfo.overdue) {
                    user.loans[index].cachedFine = overdueInfo.fine;
                    user.loans[index].cachedHoursOverdue = overdueInfo.hoursOverdue;
                    user.loans[index].originalInterest = loan.interest;
                    user.loans[index].interest = loan.interest + overdueInfo.fine;
                    if (!loan.endDate.includes('Overdue')) {
                        user.loans[index].endDate = `${loan.endDate.split('<')[0]}<br><p style="color: red;">Overdue by ${overdueInfo.hoursOverdue} hours, additional fine added.</p>`;
                    }
                } else {
                    user.loans[index].cachedFine = 0;
                    user.loans[index].cachedHoursOverdue = 0;
                    user.loans[index].originalInterest = loan.interest;
                }
            }

            const fine = loan.cachedFine || 0;
            const originalInterest = loan.originalInterest || loan.interest;
            const totalReturnAmount = (loan.takenAmount + loan.interest).toFixed(2);
            const cleanEndDate = loan.endDate.split('(')[0].split('<')[0];
            const daysBetween = calculateDaysBetween(loan.planDate, cleanEndDate);

            document.querySelectorAll(".amount-btn").forEach(btn => btn.classList.remove("active"));
            document.getElementById("amountButtons").children[index].classList.add("active");

            loanDetails.innerHTML = `
                <div class="loan-entry">
                
                    <h3 >
                        Service
                    </h3>
                    <p>${loan.takenFrom}</p>
                    <h3 >
                        Amount Details
                    </h3>
                    <p><i class="fa-solid fa-money-bill-transfer"></i> Amount: ${loan.takenAmount} Rupees</p>
                    <h3 >
                        Taken & Ends
                    </h3>
                    <p><i class="fa-solid fa-calendar-day"></i> Taken on: ${loan.planDate}</p>
                    <p><i class="fa-solid fa-calendar-check"></i> End on: ${loan.endDate}</p>
                    <h3 >
                        Loan Duration
                    </h3>
                    <p><i class="fa-solid fa-clock"></i> Duration: ${daysBetween} days</p>
                    <h3 >
                        Interest
                    </h3>
                    <p><i class="fa-solid fa-arrow-up-wide-short"></i> Normal Interest: ${originalInterest} Rupees</p>
                    <h3 >
                        Fine
                    </h3>
                    <p><i class="fa-solid fa-exclamation-triangle"></i> Overdue Fine: ${fine} Rupees</p>
                    <hr>
                    <h3 >
                        Total Amount to Pay
                    </h3>
                    <p><i class="fa-solid fa-money-check-alt"></i> ${totalReturnAmount} Rupees</p>
                    <p style="text-align: center;"><button class="amounts-btn" onclick="downloadSingleLoan(${index})">
                        <i class="fa-solid fa-download" style="margin-right: 2px;"></i> Download This
                    </button></p>
                </div>
            `;
        }

        function showAmountsModal() {
            const userInput = document.getElementById("userPassword").value.trim();
            const user = passwords[userInput];
            if (!user) return;

            let totalTaken = 0;
            let totalInterest = 0;
            user.loans.forEach(loan => {
                totalTaken += loan.takenAmount;
                totalInterest += (loan.cachedFine || 0) + (loan.originalInterest || loan.interest);
            });
            const totalReturn = (totalTaken + totalInterest).toFixed(2);

            document.getElementById("totalTaken").textContent = totalTaken;
            document.getElementById("totalInterest").textContent = totalInterest;
            document.getElementById("totalReturn").textContent = totalReturn;

            document.getElementById("amountsModal").style.display = "flex";
        }

        function closeAmountsModal() {
            document.getElementById("amountsModal").style.display = "none";
        }

        function closeModal() {
            document.getElementById("userInfoModal").style.display = "none";
            document.getElementById("passwordContainer").style.display = "flex";
            document.getElementById("userPassword").value = "";
            sessionReferenceTime = null;
        }

        function formatDate(dateStr) {
            const [d, m, y] = dateStr.split('-');
            return `${d}/${m}/${y.slice(2)}`;
        }

        function generateImage(text, filename) {
            const canvas = document.createElement('canvas');
            const lines = text.split('\n');
            const lineHeight = 30;
            canvas.width = 600;
            canvas.height = 50 + lines.length * lineHeight;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'black';
            ctx.font = '20px Poppins';
            lines.forEach((line, i) => {
                ctx.fillText(line, 30, 40 + i * lineHeight);
            });
            // Watermark
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.font = '16px Poppins';
            ctx.fillText('Powered by BsBookpad', canvas.width - 180, 30);
            const a = document.createElement('a');
            a.href = canvas.toDataURL('image/png', 1.0);
            a.download = filename;
            a.click();
        }

        function downloadSingleLoan(index) {
            const userInput = document.getElementById("userPassword").value.trim();
            const user = passwords[userInput];
            if (!user) return;
            const loan = user.loans[index];
            const cleanEndDate = loan.endDate.split('(')[0].split('<')[0];
            const totalReturnAmount = (loan.takenAmount + (loan.cachedFine || 0) + (loan.originalInterest || loan.interest)).toFixed(2);
            const text = `Total Amount ${index + 1} : ${totalReturnAmount} \nReturn date : ${formatDate(cleanEndDate)}`;
            generateImage(text, `total_amount_${index + 1}.png`);
        }

        function downloadAllLoans() {
            const userInput = document.getElementById("userPassword").value.trim();
            const user = passwords[userInput];
            if (!user) return;
            let text = '';
            user.loans.forEach((loan, i) => {
                const cleanEndDate = loan.endDate.split('(')[0].split('<')[0];
                const totalReturnAmount = (loan.takenAmount + (loan.cachedFine || 0) + (loan.originalInterest || loan.interest)).toFixed(2);
                text += `Total Amount ${i + 1} : ${totalReturnAmount} \nReturn date : ${formatDate(cleanEndDate)}\n`;
            });
            generateImage(text, 'all_total_amounts.png');
        }

    </script>
</body>
</html>
